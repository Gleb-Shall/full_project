# Telegram Bot для сбора информации о бизнесе

Telegram бот для сбора информации о бизнесе клиента с использованием GPT-4o mini через OpenRouter API.

## Функциональность

1. Сбор базовой информации:
   - Название бизнеса
   - Наличие и анализ логотипа (цвета, контур)
   - Сфера работы

2. Интеллектуальный диалог:
   - Генерация вопросов через GPT-4o mini
   - Адаптивные вопросы на основе предыдущих ответов
   - Автоматическое заполнение JSON структуры

3. Анализ логотипа:
   - Извлечение основных цветов (с процентами)
   - Определение цвета контура
   - Автоматическое применение цветов в дизайн

4. Завершение:
   - Финальное заполнение JSON
   - Отправка данных на API эндпоинт

## Установка и запуск

### Локальный запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env` на основе `.env.example` и заполните токены

3. Запустите бота:
```bash
python bot.py
```

### Docker

1. Соберите образ:
```bash
docker-compose build
```

2. Запустите контейнер:
```bash
docker-compose up -d
```

3. Просмотр логов:
```bash
docker-compose logs -f
```

## Конфигурация

Переменные окружения (`.env`):
- `TELEGRAM_TOKEN` - токен Telegram бота
- `OPENROUTER_API_KEY` - API ключ OpenRouter
- `API_ENDPOINT` - URL эндпоинта для отправки JSON (по умолчанию: http://localhost:3000/api/submit)

## Структура проекта

```
telegram_bot/
├── bot.py              # Основной файл бота
├── gpt_client.py       # Клиент для работы с OpenRouter API
├── logo_analyzer.py    # Анализ логотипов
├── json_manager.py     # Управление JSON данными
├── api_client.py       # Отправка данных на эндпоинт
├── requirements.txt    # Python зависимости
├── Dockerfile          # Docker образ
├── docker-compose.yml  # Docker Compose конфигурация
└── .env               # Переменные окружения
```

## Использование

1. Запустите бота
2. Отправьте команду `/start` в Telegram
3. Следуйте инструкциям бота
4. После завершения сбора данных JSON будет отправлен на указанный эндпоинт

## Команды

- `/start` - начать сбор информации
- `/reset` - сбросить данные и начать заново

